<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | FCAI Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* Ø¥Ø¶Ø§ÙØ© Ø¨Ø³ÙŠØ·Ø© Ù„Ø¥Ø®ÙØ§Ø¡ input Ø§Ù„Ù…Ù„ÙØ§Øª */
        #fileInput { display: none; }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="user-profile">
                <div class="avatar-wrapper" onclick="triggerUpload()">
                    <img id="profileImage" class="user-avatar" src="" style="display: none;">
                    <div id="avatarLetter" class="user-avatar">?</div>
                    <div class="avatar-overlay">ğŸ“·</div>
                </div>
                
                <input type="file" id="fileInput" accept="image/*" onchange="handleImageUpload(event)">

                <h3 id="display-name" style="color: white; font-size: 1rem;">...</h3>
                <span id="display-id" style="color: var(--primary-color); font-size: 0.9rem;">---</span>
            </div>
            
            <ul>
                <li><a onclick="showSection('profile')" id="btn-profile" class="active">ğŸ“Š Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</a></li>
                <li><a onclick="showSection('registration')" id="btn-registration">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯</a></li>
                <li><a onclick="showSection('results')" id="btn-results">ğŸ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</a></li>
                <li><a onclick="showSection('settings')" id="btn-settings">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
                <li style="margin-top: 30px;"><a onclick="logout()" style="color: #ef4444;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</a></li>
            </ul>
        </aside>

        <main class="main-content">
            
            <section id="profile" class="dashboard-section active-section">
                <h1 style="margin-bottom: 20px;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ <span id="welcome-name" style="color: var(--primary-color);">Ø·Ø§Ù„Ø¨</span></h1>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h3>
                        <div class="value" id="display-level">...</div>
                    </div>
                    <div class="stat-card">
                        <h3>Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ (GPA)</h3>
                        <div class="value" id="display-gpa" style="color: var(--accent);">0.00</div>
                    </div>
                    <div class="stat-card">
                        <h3>Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3>
                        <div class="value" id="display-registered-count">0</div>
                    </div>
                </div>

                <div class="card" style="background: rgba(34, 197, 94, 0.1); border: 1px solid #22c55e;">
                    <h3 style="color: #22c55e;">âœ… Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
                    <p>Ø§Ù„Ø­Ø³Ø§Ø¨ Ù†Ø´Ø·. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ø¯ÙŠØ« ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª.</p>
                </div>
            </section>

            <section id="registration" class="dashboard-section">
                <h2 style="margin-bottom: 20px; border-bottom: 1px solid #334155; padding-bottom: 10px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ (Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„)</h2>
                <div class="course-list" id="coursesContainer"></div>
                <div class="reg-footer">
                    <div class="total-hours">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø§Ø¹Ø§Øª: <span id="total-credits">0</span> / 18</div>
                    <button class="btn-save" onclick="saveRegistration()">Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
                </div>
            </section>

            <section id="results" class="dashboard-section">
                <h2 style="margin-bottom: 20px;">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
                <div id="resultsContent"></div>
            </section>

                        <section id="settings" class="dashboard-section">
                <h2 style="margin-bottom: 20px;">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
                
                <div id="settings-main-view">
                    
                    <div class="settings-menu-item" onclick="openPasswordSettings()">
                        <div class="settings-icon-wrapper">
                            <div class="settings-icon">ğŸ”’</div>
                            <div class="settings-text">
                                <h4>Ø§Ù„Ø£Ù…Ø§Ù† ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h4>
                                <p>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø³Ø§Ø¨</p>
                            </div>
                        </div>
                        <div class="arrow-icon">â®</div>
                    </div>

                    <div class="settings-menu-item" onclick="alert('Ø³ÙŠØªÙˆÙØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹')">
                        <div class="settings-icon-wrapper">
                            <div class="settings-icon">ğŸ””</div>
                            <div class="settings-text">
                                <h4>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h4>
                                <p>ØªØ®ØµÙŠØµ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</p>
                            </div>
                        </div>
                        <div class="arrow-icon">â®</div>
                    </div>

                </div>

                <div id="password-form-view" style="display: none;">
                    
                    <button class="btn-back-settings" onclick="backToSettingsMenu()">
                        â¯ Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                    </button>

                    <div class="settings-form">
                        <h3>ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
                        <form onsubmit="changePassword(event)">
                            <div class="form-group">
                                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
                                <input type="password" id="currentPass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©" required>
                            </div>
                            <div class="form-group">
                                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                                <input type="password" id="newPass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" required>
                            </div>
                            <div class="form-group">
                                <label>ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                                <input type="password" id="confirmPass" placeholder="Ø£Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
                            </div>
                            <button type="submit" class="btn-update">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                        </form>
                    </div>
                </div>

            </section>

                    </form>
                </div>
            </section>

        </main>
    </div>

    <div id="alertModal" class="custom-modal">
        <div class="modal-content">
            <h3 id="modalTitle">ØªÙ†Ø¨ÙŠÙ‡</h3>
            <p id="modalMessage">...</p>
            <button class="modal-btn" onclick="closeModal()">Ø­Ø³Ù†Ø§Ù‹</button>
        </div>
    </div>

    <script>
        const DB_KEY = 'fcai_students_db';
        let currentUser = null;

        const availableCourses = [
            { code: 'CS101', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³Ø¨', credits: 3 },
            { code: 'CS102', name: 'Ù…Ø¨Ø§Ø¯Ø¦ Ø¨Ø±Ù…Ø¬Ø©', credits: 3 },
            { code: 'BS101', name: 'Ø±ÙŠØ§Ø¶ÙŠØ§Øª - 1', credits: 3 },
            { code: 'BS102', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ ÙÙŠØ²ÙŠØ§Ø¡', credits: 3 },
            { code: 'HM101', name: 'Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (1)', credits: 2 },
            { code: 'HM102', name: 'Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„', credits: 2 }
        ];

        window.onload = function() {
            loadUserData();
            renderCourses();
            renderResults();
        };

        function loadUserData() {
            const email = JSON.parse(localStorage.getItem('currentUser'))?.email;
            const allStudents = JSON.parse(localStorage.getItem(DB_KEY)) || [];
            currentUser = allStudents.find(s => s.email === email);
            if (!currentUser) { window.location.href = 'login.html'; return; }

            calculateRealGPA();

            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†ØµÙŠØ©
            document.getElementById('display-name').innerText = currentUser.fullName;
            document.getElementById('welcome-name').innerText = currentUser.fullName.split(" ")[0];
            document.getElementById('display-id').innerText = "ID: " + currentUser.id;
            document.getElementById('display-level').innerText = currentUser.level;
            document.getElementById('display-gpa').innerText = currentUser.gpa || "0.00";

            // --- Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ---
            const imgElem = document.getElementById('profileImage');
            const letterElem = document.getElementById('avatarLetter');

            if (currentUser.profileImage) {
                // Ù„Ùˆ ÙÙŠÙ‡ ØµÙˆØ±Ø©ØŒ Ø§Ø¹Ø±Ø¶Ù‡Ø§ ÙˆØ§Ø®ÙÙ Ø§Ù„Ø­Ø±Ù
                imgElem.src = currentUser.profileImage;
                imgElem.style.display = 'block';
                letterElem.style.display = 'none';
            } else {
                // Ù„Ùˆ Ù…ÙÙŠØ´ ØµÙˆØ±Ø©ØŒ Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø±Ù ÙˆØ§Ø®ÙÙ Ø§Ù„ØµÙˆØ±Ø©
                imgElem.style.display = 'none';
                letterElem.style.display = 'flex';
                letterElem.innerText = currentUser.fullName.charAt(0);
            }
            
            const count = currentUser.registeredCourses ? currentUser.registeredCourses.length : 0;
            document.getElementById('display-registered-count').innerText = count + " Ù…ÙˆØ§Ø¯";
        }

        // --- Ø¯ÙˆØ§Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© ---
        function triggerUpload() {
            document.getElementById('fileInput').click();
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù†Øµ (Base64) Ø¹Ø´Ø§Ù† Ù†Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Image = e.target.result;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
                currentUser.profileImage = base64Image;
                
                // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                updateDatabase(currentUser);
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© ÙÙˆØ±Ø§Ù‹
                loadUserData();
                showModal('ØªÙ…', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!', true);
            };
            reader.readAsDataURL(file);
        }

        // --- Ø¯ÙˆØ§Ù„ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ---
        function changePassword(e) {
            e.preventDefault();
            const currentPass = document.getElementById('currentPass').value;
            const newPass = document.getElementById('newPass').value;
            const confirmPass = document.getElementById('confirmPass').value;

            if (currentPass !== currentUser.password) {
                showModal('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©!', false);
                return;
            }
            if (newPass.length < 4) {
                showModal('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ø§Ù‹.', false);
                return;
            }
            if (newPass !== confirmPass) {
                showModal('Ø®Ø·Ø£', 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©.', false);
                return;
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯
            currentUser.password = newPass;
            updateDatabase(currentUser);
            
            // ØªÙØ±ÙŠØº Ø§Ù„ÙÙˆØ±Ù…
            e.target.reset();
            showModal('ØªÙ… Ø¨Ù†Ø¬Ø§Ø­', 'ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±. ÙŠØ±Ø¬Ù‰ ØªØ°ÙƒØ±Ù‡Ø§ Ø¬ÙŠØ¯Ø§Ù‹.', true);
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function updateDatabase(updatedUser) {
            let allStudents = JSON.parse(localStorage.getItem(DB_KEY)) || [];
            const index = allStudents.findIndex(s => s.id === updatedUser.id);
            if (index !== -1) {
                allStudents[index] = updatedUser;
                localStorage.setItem(DB_KEY, JSON.stringify(allStudents));
                localStorage.setItem('currentUser', JSON.stringify(updatedUser));
            }
        }

        // --- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ (GPA, Results, etc.) ---
        function calculateRealGPA() {
            if (!currentUser.grades || Object.keys(currentUser.grades).length === 0) return;
            let totalPoints = 0, totalHours = 0;
            for (const [courseCode, score] of Object.entries(currentUser.grades)) {
                const course = availableCourses.find(c => c.code === courseCode);
                if (course) {
                    let points = 0;
                    if (score >= 90) points = 4.0;
                    else if (score >= 85) points = 3.7;
                    else if (score >= 80) points = 3.3;
                    else if (score >= 75) points = 3.0;
                    else if (score >= 70) points = 2.7;
                    else if (score >= 65) points = 2.3;
                    else if (score >= 60) points = 2.0;
                    else if (score >= 50) points = 1.0;
                    totalPoints += points * course.credits;
                    totalHours += course.credits;
                }
            }
            if (totalHours > 0) currentUser.gpa = (totalPoints / totalHours).toFixed(2);
        }

        function renderResults() {
            const container = document.getElementById('resultsContent');
            const grades = currentUser.grades || {};
            if (Object.keys(grades).length === 0) {
                container.innerHTML = `<div class="card" style="text-align: center; padding: 40px;"><h1 style="font-size: 3rem;">â³</h1><h3>Ù„Ù… ÙŠØªÙ… Ø±ØµØ¯ Ø¯Ø±Ø¬Ø§Øª Ø¨Ø¹Ø¯</h3></div>`;
                return;
            }
            let html = `<table class="results-table"><thead><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø§Ù„Ø³Ø§Ø¹Ø§Øª</th><th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th><th>Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</th></tr></thead><tbody>`;
            for (const [code, score] of Object.entries(grades)) {
                const course = availableCourses.find(c => c.code === code);
                const courseName = course ? course.name : code;
                const credits = course ? course.credits : '-';
                let gradeLetter = 'F', gradeClass = 'grade-F';
                if (score >= 90) { gradeLetter = 'A+'; gradeClass = 'grade-A'; }
                else if (score >= 85) { gradeLetter = 'A'; gradeClass = 'grade-A'; }
                else if (score >= 75) { gradeLetter = 'B'; gradeClass = 'grade-B'; }
                else if (score >= 65) { gradeLetter = 'C'; gradeClass = 'grade-C'; }
                else if (score >= 50) { gradeLetter = 'D'; gradeClass = 'grade-D'; }
                html += `<tr><td>${courseName} <br><span style="font-size:0.8rem; color:#94a3b8;">${code}</span></td><td>${credits}</td><td style="font-weight:bold; color:white;">${score}</td><td><span class="grade-badge ${gradeClass}">${gradeLetter}</span></td></tr>`;
            }
            html += `</tbody></table>`;
            container.innerHTML = html;
        }

        function showSection(sectionId) {
            document.querySelectorAll('.dashboard-section').forEach(sec => sec.classList.remove('active-section'));
            document.querySelectorAll('.sidebar a').forEach(btn => btn.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active-section');
            document.getElementById('btn-' + sectionId).classList.add('active');
        }

        function renderCourses() {
            const container = document.getElementById('coursesContainer');
            container.innerHTML = '';
            const myCourses = currentUser.registeredCourses || [];
            availableCourses.forEach(course => {
                const isChecked = myCourses.includes(course.code) ? 'checked' : '';
                const html = `
                    <div class="course-item">
                        <div class="course-info">
                            <h4>${course.name}</h4>
                            <span>${course.code} <span class="credit-badge">${course.credits} Ø³Ø§Ø¹Ø§Øª</span></span>
                        </div>
                        <input type="checkbox" class="course-checkbox" value="${course.code}" data-credits="${course.credits}" onchange="calculateTotal()" ${isChecked}>
                    </div>
                `;
                container.innerHTML += html;
            });
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            document.querySelectorAll('.course-checkbox:checked').forEach(box => total += parseInt(box.getAttribute('data-credits')));
            const display = document.getElementById('total-credits');
            display.innerText = total;
            display.style.color = total > 18 ? '#ef4444' : '#22c55e';
        }

        function saveRegistration() {
            let total = parseInt(document.getElementById('total-credits').innerText);
            if (total === 0) { showModal('ØªÙ†Ø¨ÙŠÙ‡', 'ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!', false); return; }
            if (total > 18) { showModal('Ø®Ø·Ø£', 'Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¬Ø§ÙˆØ² 18 Ø³Ø§Ø¹Ø©!', false); return; }
            const selectedCodes = [];
            document.querySelectorAll('.course-checkbox:checked').forEach(box => selectedCodes.push(box.value));
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆØ­Ø¯Ø©
            currentUser.registeredCourses = selectedCodes;
            updateDatabase(currentUser);
            
            loadUserData();
            showModal('ØªÙ… Ø§Ù„Ø­ÙØ¸', 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¨Ù†Ø¬Ø§Ø­!', true);
        }

        function logout() { localStorage.removeItem('currentUser'); window.location.href = 'login.html'; }
        function showModal(t, m, s) { document.getElementById('modalTitle').innerText = t; document.getElementById('modalMessage').innerText = m; document.getElementById('modalTitle').style.color = s ? '#22c55e' : '#ef4444'; document.getElementById('alertModal').style.display = 'flex'; }
        function closeModal() { document.getElementById('alertModal').style.display = 'none'; }
        
                // --- Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ---
        function openPasswordSettings() {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙÙˆØ±Ù…
            document.getElementById('settings-main-view').style.display = 'none';
            document.getElementById('password-form-view').style.display = 'block';
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø­Ø±ÙƒÙŠ Ø¨Ø³ÙŠØ·
            document.getElementById('password-form-view').style.animation = 'fadeIn 0.3s ease';
        }

        function backToSettingsMenu() {
            // Ø§Ù„Ø¹ÙƒØ³: Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙÙˆØ±Ù… ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            document.getElementById('password-form-view').style.display = 'none';
            document.getElementById('settings-main-view').style.display = 'block';
        }

    </script>
</body>
</html>
